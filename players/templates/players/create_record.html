{% load filters %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rate Player</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" 
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <style>
      hr.thick {
        height: 5px;
        background-color: black;
        border: none;
      }
    </style>
  </head>
  <body>
    <div class="jumbotron text-center">
      <h1><strong> {{ name_first }} {{ name_last }}</h1>
      <p>{{ year }} {{ team_name }}</p>
      <p>bats: {{ greenfield.bats }}  throws: {{ greenfield.throws }}</p>
    </div>

    <h2>Confirm Player Record</h2>

    <form method="post">
      {% csrf_token %}

      <!-- Hidden identity fields -->
      <input type="hidden" name="name_first" value="{{ name_first }}">
      <input type="hidden" name="name_last" value="{{ name_last }}">
      <input type="hidden" name="year" value="{{ year }}">
      <input type="hidden" name="team_name" value="{{ team_name }}">

      <h4>Player Details</h4>
      {% for field in form %}
        <div class="form-group">
          {{ field.label_tag }}
          {{ field }}
          {% if field.errors %}
            <div class="text-danger small">{{ field.errors }}</div>
          {% endif %}
        </div>
      {% endfor %}

      <h4>Position Ratings</h4>
      {{ formset.management_form }}
      {% for subform in formset %}
        <div class="form-row mb-2">
          <div class="form-group col-md-5">
            {{ subform.position.label_tag }}
            {{ subform.position }}
            {% if subform.position.errors %}
              <div class="text-danger small">{{ subform.position.errors }}</div>
            {% endif %}
          </div>
          <div class="form-group col-md-5">
            {{ subform.rating.label_tag }}
            {{ subform.rating }}
            {% if subform.rating.errors %}
              <div class="text-danger small">{{ subform.rating.errors }}</div>
            {% endif %}
          </div>
          <div class="form-group col-md-2">
            {{ subform.DELETE }} <label>Remove</label>
          </div>
        </div>
      {% endfor %}

      <button type="submit" name="confirm_save" class="btn btn-success mt-3">Confirm and Save</button>

    </form>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" 
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" 
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" 
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" 
            crossorigin="anonymous"></script>
  </body>
</html>
{% endblock %}
